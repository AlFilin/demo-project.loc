class h{constructor(){this.sDefaultSearchInputClass="_shopaholic-search-input",this.sSearchInput=`.${this.sDefaultSearchInputClass}`,this.sComponentMethod="onAjax",this.obAjaxRequestCallback=null,this.sSearchState="",this.sSearchResultState="",this.iSearchDelay=400,this.iSearchLimit=3,this.obTimer=null}init(){console.log("init"),document.addEventListener("input",e=>{if(e.target.matches(this.sSearchInput)){console.log("input event");let t=e.target.value;this.processSearchString(t)}})}processSearchString(e){console.log("processSearchString"),e=e.trim(),!(e.length<this.iSearchLimit&&this.sSearchState.length<this.iSearchLimit)&&(e.length<this.iSearchLimit&&(e=""),this.obTimer&&clearTimeout(this.obTimer),this.sSearchState=e,this.obTimer=setTimeout(()=>{e===this.sSearchState&&this.sendAjaxRequest(e)},this.iSearchDelay))}sendAjaxRequest(e){console.log("sendAjaxRequest"),this.sSearchResultState=e;let t=this,s={data:{search:e},success:function(a){e===t.sSearchResultState&&this.success(a)}};this.obAjaxRequestCallback!==null&&(s=this.obAjaxRequestCallback(s)),oc.ajax(this.sComponentMethod,s)}setAjaxRequestCallback(e){return this.obAjaxRequestCallback=e,this}setSearchLimit(e){return e>0&&(this.iSearchLimit=e),this}setSearchDelay(e){return e>0&&(this.iSearchDelay=e),this}}new class{constructor(){this.searchResultWrapper="search-panel__result",this.searchInputSelector="search-panel__input-field",this.preLoaderSelector=".search-panel__preloader",this.init(),this.handler()}init(){this.obSearchHelper=new h,this.obSearchHelper.setAjaxRequestCallback(e=>(e.update={"search-result":`.${this.searchResultWrapper}`},e.loading=this.preLoaderSelector,e)),this.obSearchHelper.init()}handler(){document.querySelector(`.${this.searchInputSelector}`).addEventListener("keydown",t=>{t.keyCode===13&&t.preventDefault()})}};
